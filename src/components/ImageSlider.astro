---
const base = import.meta.env.BASE_URL;
const destino = `${base}final`;
---

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css" />

<section class="page-transition" style="padding:2rem;" data-aos="zoom-in">
  <div class="swiper-container">
    <div class="swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide slide-content">
          <h2>Exacto, siempre recordar√© este d√≠a</h2>
          <img src={`${base}antes1.jpg`} alt="Antes" />
        </div>
        <div class="swiper-slide slide-content">
          <h2>No olvidar√© tampoco la primera vez que te vi</h2>
          <img src={`${base}despues2.jpg`} alt="Despu√©s2" />
        </div>
        <div class="swiper-slide slide-content" style="text-align:center;">
          <h2>Y sobre todo, tengo en mente lo que nos espera</h2>
          <img src={`${base}despues1.jpg`} alt="Despu√©s" />
          <button
            id="seguirBtn"
            class="slide-button"
            style="margin-top:1.5rem; display:none; margin-left:auto; margin-right:auto;"
          >
            Ahora s√≠, pulsa para mi regalo üéÅ
          </button>
        </div>
      </div>
      <div class="swiper-pagination"></div>
      <div class="swiper-button-prev"></div>
      <div class="swiper-button-next"></div>
    </div>
  </div>
</section>

<script type="module">
  import Swiper from 'https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.mjs';

  const swiper = new Swiper('.swiper', {
    loop: false,
    pagination: { el: '.swiper-pagination' },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
  });

  const seguirBtn = document.getElementById('seguirBtn');
  const destino = '/cumplemidani/final'; // ‚Üê ahora coincide con la parte Astro

  swiper.on('slideChange', () => {
    seguirBtn.style.display = swiper.activeIndex === 2 ? 'block' : 'none';
  });

  seguirBtn.addEventListener('click', () => {
    if (typeof fadeAndGo === 'function') {
      fadeAndGo(destino);
    } else {
      window.location.href = destino;
    }
  });
</script>
