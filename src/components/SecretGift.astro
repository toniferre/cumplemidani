---
// SecretGift.astro
---

<section class="gift-section" data-aos="fade-up">
  <div class="gift-box" id="giftBox">
    üéÅ <span>Abrir</span>
  </div>

  <div class="secret-message" id="secretMessage">
    <p>Hay cosas que no caben en palabras, pero este regalo es solo una muestra de lo mucho que significas para m√≠.</p>
    <p>Gracias por ser t√∫. Por tu luz, tu ternura, tu alegr√≠a. Te quiero con todo mi coraz√≥n.</p>

    <h2>üíñ Te amo üíñ</h2>
  </div>
</section>

<audio id="giftMusic" src="/cancion.mp3" preload="auto"></audio>

<style>
  .gift-section {
    text-align: center;
    padding: 3rem;
  }

  .gift-box {
    font-size: 3rem;
    cursor: pointer;
    display: inline-block;
    padding: 2rem;
    border: 2px solid #ff69b4;
    border-radius: 1rem;
    animation: vibrar 0.5s infinite;
    background-color: #fff0f5;
    transition: transform 0.3s ease;
  }

  .gift-box:hover {
    transform: scale(1.05);
  }

  @keyframes vibrar {
    0% { transform: rotate(0deg); }
    25% { transform: rotate(2deg); }
    50% { transform: rotate(-2deg); }
    75% { transform: rotate(2deg); }
    100% { transform: rotate(0deg); }
  }

  .secret-message {
    margin-top: 2rem;
    opacity: 0;
    transform: scale(0.8);
    transition: opacity 1s ease, transform 0.5s ease;
  }

  .secret-message.visible {
    opacity: 1;
    transform: scale(1);
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const box = document.getElementById('giftBox');
    const message = document.getElementById('secretMessage');
    const music = document.getElementById('giftMusic');

    box.addEventListener('click', () => {
      box.style.animation = 'none';
      box.style.opacity = '0';

      setTimeout(() => {
        box.style.display = 'none';
        message.classList.add('visible');

        // üéµ Reproducir m√∫sica con fade-in
        music.volume = 0;
        music.play().catch((err) => {
          console.warn('No se pudo reproducir la m√∫sica:', err);
        });

        let volume = 0;
        const fadeIn = setInterval(() => {
          if (volume < 0.6) {
            volume += 0.05;
            music.volume = Math.min(volume, 0.6);
          } else {
            clearInterval(fadeIn);
          }
        }, 200);
      }, 300);
    });
  });
</script>
